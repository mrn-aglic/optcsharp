<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="Content-type" content="text/html; charset=UTF-8"/>
    <title>Visualize Python, Java, JavaScript, TypeScript, and Ruby code execution</title>
    @* <script type="text/javascript" src="~/client/lib/vue/vue.js"></script> *@

    <!-- requirements for pytutor.js -->
    <script type="text/javascript" src="~/opt/js/d3.v2.min.js"></script>
    <script type="text/javascript" src="~/opt/js/jquery-1.8.2.min.js"></script>
    <script type="text/javascript" src="~/opt/js/jquery.ba-bbq.min.js"></script> <!-- for handling back button and URL hashes -->
    <script type="text/javascript" src="~/opt/js/jquery.ba-dotimeout.min.js"></script> <!-- for event debouncing -->
    <script type="text/javascript" src="~/opt/js/jquery.jsPlumb-1.3.10-all-min.js"></script> <!-- for rendering SVG connectors
    DO NOT UPGRADE ABOVE 1.3.10 OR ELSE BREAKAGE WILL OCCUR -->
    <script type="text/javascript" src="~/opt/js/diff_match_patch.js"></script>

    <script type="text/javascript" src="~/opt/js/jquery-ui-1.11.4/jquery-ui.min.js"></script> <!-- for sliders and other UI elements -->
    <link type="text/css" href="~/opt/js/jquery-ui-1.11.4/jquery-ui.css" rel="stylesheet"/>

    <!-- for annotation bubbles -->
    <script type="text/javascript" src="~/opt/js/jquery.qtip.min.js"></script>
    <link type="text/css" href="~/opt/css/jquery.qtip.css" rel="stylesheet"/>

    <script type="text/javascript" src="~/opt/js/pytutor.js"></script>
    <link rel="stylesheet" href="~/opt/css/pytutor.css"/>

    <!-- requirements for opt-frontend.js -->

    <!-- Ace online code editor -->
    <script type="text/javascript" src="~/opt/js/ace/src-min-noconflict/ace.js" charset="utf-8"></script>

    <script type="text/javascript" src="~/opt/js/opt-frontend-common.js"></script>
    <script type="text/javascript" src="~/opt/js/opt-frontend.js"></script>
    <link rel="stylesheet" href="~/opt/css/opt-frontend.css"/>

    <!-- include this AFTER opt-frontend.js so that configuration
    global variables are already defined at load time -->
    <script type="text/javascript" src="~/opt/js/togetherjs/togetherjs-min.js"></script>

    <script type="text/javascript" src="~/opt/js/socket.io-client/socket.io.js"></script>

    <script type="text/javascript" src="~/examples/examples.js"></script>

    <script type="text/javascript">
              window.isDev = window.location.hostname === 'localhost';
    </script>

    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script type="text/javascript" src="~/opt/js/externalRepositories/user.js"></script>
    <script type="text/javascript" src="~/opt/js/externalRepositories/activity.js"></script>
    <script type="text/javascript" src="~/opt/js/loggerHooks.js"></script>

    <script type="text/javascript">
    
        $('document').ready(function() {
          initAceEditor(420);
          // pyInputAceEditor.setValue();
          
          pyInputAceEditor.clearSelection();
          pyInputAceEditor.focus();
          
          const urlParams = new URLSearchParams(window.location.search);
          const email = urlParams.get('email');

          const userRepo = new UserRepo();
          const activityRepo = new ActivityRepo();
          
          const userPromise = userRepo.saveAndGetUser(email);
          const eventActionsPromise = activityRepo.getEventActions();
          
          const languageId = 2;
          
          axios.all([userPromise, eventActionsPromise])
          .then(axios.spread(function(userResponse, eventActionsResponse) {
              
              const user = userResponse.data;
              const eventActions = eventActionsResponse.data;
              const hooksManager = new HooksManager(user, languageId, eventActions);
              hooksManager.observe();
          }));
        });
    </script>
    <!-- insert google-analytics.txt contents here -->

</head>
<body>

<div id="pyInputPane">

    <div id="codeInputWarnings">
        Write code in

        <select id="pythonVersionSelector">
            <option value="js">JavaScript ES6</option>
        </select>

    </div>

    @* <p style="margin-top: 25px; font-weight: bold;">C# Primjeri</p> *@

    @* <p style="margin-top: 10px;"> *@
    @*     P2: *@
    @* *@
    @*     <select id="csharp-examples-p2" onchange="loadExample('p2')"> *@
    @*     </select> *@
    @* </p> *@
    @* <p style="margin-top: 10px;"> *@
    @*     OOP: *@
    @* *@
    @*     <select id="csharp-examples-oop" onchange="loadExample('oop')"> *@
    @*     </select> *@
    @* </p> *@

    <div id="codeInputPane"></div> <!-- populate with a CodeMirror or Ace code editor instance -->
    <div id="frontendErrorOutput"></div>
    <div id="surveyPane"></div>

    <p>
        <button id="executeBtn" class="bigBtn" type="button">Visualize Execution</button>
        @* <button style="margin-left: 20px;" id="liveModeBtn" class="bigBtn" type="button">Live Programming Mode <font color="#e93f34">(NEW!)</font></button> *@
    </p>

    <div id="optionsPane" style="margin-top: 20px; line-height: 150%;">
        <select id="cumulativeModeSelector">
            <option value="false">hide exited frames [default]</option>
            <option value="true">show all frames (Python)</option>
            <!-- <option value="holistic">holistic mode (experimental)</option> -->
        </select>
        <select id="heapPrimitivesSelector">
            <option value="false">inline primitives &amp; nested objects [default]</option>
            <option value="true">render all objects on the heap (Python/Java)</option>
        </select>
        <select id="textualMemoryLabelsSelector">
            <option value="false">draw pointers as arrows [default]</option>
            <option value="true">use text labels for pointers</option>
        </select>

        <!-- hide these for now -->
        <select id="drawParentPointerSelector" style="display: none;">
            <option value="false">hide environment parent pointers (default)</option>
            <!--<option value="true">show environment parent pointers</option>-->
        </select>
        <select id="showOnlyOutputsSelector" style="display: none;">
            <option value="false">show everything (default)</option>
            <!--<option value="true">show only outputs</option>-->
        </select>
    </div>


</div>


<div id="pyOutputPane">
</div>

</body>
</html>